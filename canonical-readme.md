# Adding Canonical URLs to Your Next.js Project

This document explains how canonical URLs are implemented in your Next.js project and how to apply them to all pages.

## How It Works

Instead of using middleware or client-side components, we use a static approach that works reliably at build time:

1. The utility function (`src/utils/metadata.ts`) creates metadata objects with canonical URLs based on the provided path
2. Each page layout sets its canonical URL explicitly with the correct path

## How to Update Layout Files

For each layout file in your project, update it using this pattern:

```tsx
import { Metadata } from "next/types";
import YourPageComponent from "./page";
import { createMetadata } from "@/utils/metadata";

const baseMetadata: Metadata = {
  title: "Your Page Title",
  description: "Your page description"
  // Add other metadata properties as needed
};

// Provide the exact path for this page
export const metadata = createMetadata(baseMetadata, '/your-page-path');

export default function YourLayout() {
  return <YourPageComponent />;
}
```

## Dynamic Routes

For dynamic routes (like blog posts), use the `generateMetadata` function:

```tsx
// src/app/(blog)/blog/[slug]/page.tsx
import { Metadata } from "next";
import { getBlogPostBySlug } from "@/utils/api";
import { createMetadata } from "@/utils/metadata";

export async function generateMetadata({ params }: { params: { slug: string } }): Promise<Metadata> {
  const blog = await getBlogPostBySlug(params.slug);
  
  if (!blog) {
    return createMetadata({
      title: 'Blog post not found',
      description: 'The requested blog post could not be found',
    }, '/blog/not-found');
  }
  
  const baseMetadata = {
    title: blog.title.rendered,
    description: blog.excerpt.rendered.replace(/<[^>]*>/g, '').slice(0, 160),
  };
  
  return createMetadata(baseMetadata, `/blog/${params.slug}`);
}
```

## Examples

### Root Layout
```tsx
// src/app/layout.tsx
const baseMetadata: Metadata = {
  title: "Liko - Creative agency & portfolio Next js Template",
  description: "Generated by create next app",
  verification: {
    google: 'fvBLEq97e4pjzycuANSfPW7_vzv02HJr-dA-TuEM0zY'
  }
};

export const metadata = createMetadata(baseMetadata, '/');
```

### Service Page
```tsx
// src/app/(service)/best-seo-agency/layout.tsx
const baseMetadata: Metadata = {
  title: "Best SEO Agency | Top SEO Services for Your Business",
  description: "Need the best SEO agency? We provide top SEO services to boost your website's ranking, increase traffic, and drive sales. Let our experts help you succeed online!"
};

export const metadata = createMetadata(baseMetadata, '/best-seo-agency');
```

## Important Notes

1. Make sure to set your domain in `.env.local`:
   ```
   NEXT_PUBLIC_DOMAIN=https://biztalbox.com
   ```

2. The canonical URL will be:
   - Your domain + the path you specify
   - Make sure to include the leading slash in the path
   - Don't include trailing slashes in the path parameter (the utility handles this)

## Files to Update

Update all layout files in your project:

- `src/app/layout.tsx` (root layout) - ✅ Done
- `src/app/(service)/best-seo-agency/layout.tsx` - ✅ Done
- `src/app/(blog)/blog/page.tsx` - ✅ Done
- `src/app/(blog)/blog/[slug]/page.tsx` - ✅ Done
- Other service layouts
- About layouts
- Contact layouts
- Etc.

This static approach ensures proper SEO canonical tag handling for all pages without runtime errors. 